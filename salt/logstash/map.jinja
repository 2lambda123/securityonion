{% from 'vars/globals.map.jinja' import GLOBALS %}
{% set REDIS_NODES = [] %}
{% if GLOBALS.role in ['so-searchnode', 'so-standalone', 'so-managersearch'] %}
  {% set node_data = salt['pillar.get']('logstash:nodes') %}
  {% for node_type, node_details in node_data.items() | sort %}
    {% if node_type in ['manager', 'managersearch', 'standalone', 'receiver' ] %}
      {% for hostname in node_data[node_type].keys() %}
        {% do REDIS_NODES.append({hostname:node_details[hostname].ip}) %}
      {% endfor %}
    {% endif %}
  {% endfor %}
{% else %}
  {% do REDIS_NODES.append({GLOBALS.node_ip}) %}
{% endif %}
